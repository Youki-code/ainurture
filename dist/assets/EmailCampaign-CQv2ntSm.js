import{c as X,g as Lr,r as m,d as Zt,_ as q,u as $r,e as Ur,j as c,m as Ze,s as Rt}from"./index-xlzB0e8l.js";import{C as qr}from"./check-Bkujcmno.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=X("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=X("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var er={exports:{}},Gr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vr=Gr,Yr=Vr;function tr(){}function rr(){}rr.resetWarningCache=tr;var Jr=function(){function t(n,s,i,o,a,f){if(f!==Yr){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:rr,resetWarningCache:tr};return r.PropTypes=r,r};er.exports=Jr();var Qr=er.exports;const w=Lr(Qr);function ae(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(h){try{l(n.next(h))}catch(b){o(b)}}function f(h){try{l(n.throw(h))}catch(b){o(b)}}function l(h){h.done?i(h.value):s(h.value).then(a,f)}l((n=n.apply(t,e||[])).next())})}function ce(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return f([l,h])}}function f(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],s=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Dt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Tt(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Zr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ye(t,e){var r=en(t);if(typeof r.path!="string"){var n=t.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:t.name,writable:!1,configurable:!1,enumerable:!0})}return r}function en(t){var e=t.name,r=e&&e.lastIndexOf(".")!==-1;if(r&&!t.type){var n=e.split(".").pop().toLowerCase(),s=Zr.get(n);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}var tn=[".DS_Store","Thumbs.db"];function rn(t){return ae(this,void 0,void 0,function(){return ce(this,function(e){return Ce(t)&&nn(t.dataTransfer)?[2,cn(t.dataTransfer,t.type)]:sn(t)?[2,on(t)]:Array.isArray(t)&&t.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,an(t)]:[2,[]]})})}function nn(t){return Ce(t)}function sn(t){return Ce(t)&&Ce(t.target)}function Ce(t){return typeof t=="object"&&t!==null}function on(t){return lt(t.target.files).map(function(e){return ye(e)})}function an(t){return ae(this,void 0,void 0,function(){var e;return ce(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(n){return n.getFile()}))];case 1:return e=r.sent(),[2,e.map(function(n){return ye(n)})]}})})}function cn(t,e){return ae(this,void 0,void 0,function(){var r,n;return ce(this,function(s){switch(s.label){case 0:return t.items?(r=lt(t.items).filter(function(i){return i.kind==="file"}),e!=="drop"?[2,r]:[4,Promise.all(r.map(ln))]):[3,2];case 1:return n=s.sent(),[2,Mt(nr(n))];case 2:return[2,Mt(lt(t.files).map(function(i){return ye(i)}))]}})})}function Mt(t){return t.filter(function(e){return tn.indexOf(e.name)===-1})}function lt(t){if(t===null)return[];for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(n)}return e}function ln(t){if(typeof t.webkitGetAsEntry!="function")return Ot(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?sr(e):Ot(t)}function nr(t){return t.reduce(function(e,r){return Tt(Tt([],Dt(e),!1),Dt(Array.isArray(r)?nr(r):[r]),!1)},[])}function Ot(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var r=ye(e);return Promise.resolve(r)}function un(t){return ae(this,void 0,void 0,function(){return ce(this,function(e){return[2,t.isDirectory?sr(t):fn(t)]})})}function sr(t){var e=t.createReader();return new Promise(function(r,n){var s=[];function i(){var o=this;e.readEntries(function(a){return ae(o,void 0,void 0,function(){var f,l,h;return ce(this,function(b){switch(b.label){case 0:if(a.length)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return f=b.sent(),r(f),[3,4];case 3:return l=b.sent(),n(l),[3,4];case 4:return[3,6];case 5:h=Promise.all(a.map(un)),s.push(h),i(),b.label=6;case 6:return[2]}})})},function(a){n(a)})}i()})}function fn(t){return ae(this,void 0,void 0,function(){return ce(this,function(e){return[2,new Promise(function(r,n){t.file(function(s){var i=ye(s,t.fullPath);r(i)},function(s){n(s)})})]})})}var dn=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var n=t.name||"",s=(t.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return r.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?i===a.replace(/\/.*$/,""):s===a})}return!0};function It(t){return mn(t)||hn(t)||or(t)||pn()}function pn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mn(t){if(Array.isArray(t))return ut(t)}function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ct(Object(r),!0).forEach(function(n){ir(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ge(t,e){return bn(t)||yn(t,e)||or(t,e)||gn()}function gn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(t,e){if(t){if(typeof t=="string")return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(t,e)}}function ut(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yn(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(f){i=!0,a=f}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function bn(t){if(Array.isArray(t))return t}var wn="file-invalid-type",xn="file-too-large",vn="file-too-small",En="too-many-files",Sn=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var r=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:wn,message:"File type must be ".concat(r)}},Lt=function(e){return{code:xn,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},$t=function(e){return{code:vn,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Fn={code:En,message:"Too many files"};function ar(t,e){var r=t.type==="application/x-moz-file"||dn(t,e);return[r,r?null:Sn(e)]}function cr(t,e,r){if(V(t.size))if(V(e)&&V(r)){if(t.size>r)return[!1,Lt(r)];if(t.size<e)return[!1,$t(e)]}else{if(V(e)&&t.size<e)return[!1,$t(e)];if(V(r)&&t.size>r)return[!1,Lt(r)]}return[!0,null]}function V(t){return t!=null}function _n(t){var e=t.files,r=t.accept,n=t.minSize,s=t.maxSize,i=t.multiple,o=t.maxFiles,a=t.validator;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(f){var l=ar(f,r),h=ge(l,1),b=h[0],T=cr(f,n,s),P=ge(T,1),j=P[0],C=a?a(f):null;return b&&j&&!C})}function Ne(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function je(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Ut(t){t.preventDefault()}function An(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function kn(t){return t.indexOf("Edge/")!==-1}function Rn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return An(t)||kn(t)}function U(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return e.some(function(a){return!Ne(n)&&a&&a.apply(void 0,[n].concat(i)),Ne(n)})}}function jn(){return"showOpenFilePicker"in window}function Pn(t){if(V(t)){var e=Object.entries(t).filter(function(r){var n=ge(r,2),s=n[0],i=n[1],o=!0;return lr(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(ur))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,n){var s=ge(n,2),i=s[0],o=s[1];return Nt(Nt({},r),{},ir({},i,o))},{});return[{description:"Files",accept:e}]}return t}function Dn(t){if(V(t))return Object.entries(t).reduce(function(e,r){var n=ge(r,2),s=n[0],i=n[1];return[].concat(It(e),[s],It(i))},[]).filter(function(e){return lr(e)||ur(e)}).join(",")}function Tn(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Mn(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function lr(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function ur(t){return/^.*\.[\w]+$/.test(t)}var On=["children"],In=["open"],Cn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Nn=["refKey","onChange","onClick"];function Ln(t){return qn(t)||Un(t)||fr(t)||$n()}function $n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Un(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qn(t){if(Array.isArray(t))return ft(t)}function et(t,e){return Wn(t)||zn(t,e)||fr(t,e)||Hn()}function Hn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fr(t,e){if(t){if(typeof t=="string")return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}}function ft(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zn(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,a;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(f){i=!0,a=f}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw a}}return n}}function Wn(t){if(Array.isArray(t))return t}function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qt(Object(r),!0).forEach(function(n){dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Le(t,e){if(t==null)return{};var r=Bn(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bn(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}var yt=m.forwardRef(function(t,e){var r=t.children,n=Le(t,On),s=pr(n),i=s.open,o=Le(s,In);return m.useImperativeHandle(e,function(){return{open:i}},[i]),Zt.createElement(m.Fragment,null,r(v(v({},o),{},{open:i})))});yt.displayName="Dropzone";var dr={disabled:!1,getFilesFromEvent:rn,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};yt.defaultProps=dr;yt.propTypes={children:w.func,accept:w.objectOf(w.arrayOf(w.string)),multiple:w.bool,preventDropOnDocument:w.bool,noClick:w.bool,noKeyboard:w.bool,noDrag:w.bool,noDragEventsBubbling:w.bool,minSize:w.number,maxSize:w.number,maxFiles:w.number,disabled:w.bool,getFilesFromEvent:w.func,onFileDialogCancel:w.func,onFileDialogOpen:w.func,useFsAccessApi:w.bool,autoFocus:w.bool,onDragEnter:w.func,onDragLeave:w.func,onDragOver:w.func,onDrop:w.func,onDropAccepted:w.func,onDropRejected:w.func,onError:w.func,validator:w.func};var pt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function pr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=v(v({},dr),t),r=e.accept,n=e.disabled,s=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,a=e.multiple,f=e.maxFiles,l=e.onDragEnter,h=e.onDragLeave,b=e.onDragOver,T=e.onDrop,P=e.onDropAccepted,j=e.onDropRejected,C=e.onFileDialogCancel,Q=e.onFileDialogOpen,W=e.useFsAccessApi,be=e.autoFocus,le=e.preventDropOnDocument,we=e.noClick,Z=e.noKeyboard,xe=e.noDrag,N=e.noDragEventsBubbling,d=e.onError,g=e.validator,x=m.useMemo(function(){return Dn(r)},[r]),L=m.useMemo(function(){return Pn(r)},[r]),H=m.useMemo(function(){return typeof Q=="function"?Q:Ht},[Q]),$=m.useMemo(function(){return typeof C=="function"?C:Ht},[C]),E=m.useRef(null),k=m.useRef(null),ve=m.useReducer(Kn,pt),Ee=et(ve,2),We=Ee[0],M=Ee[1],Mr=We.isFocused,bt=We.isFileDialogActive,Se=m.useRef(typeof window<"u"&&window.isSecureContext&&W&&jn()),wt=function(){!Se.current&&bt&&setTimeout(function(){if(k.current){var p=k.current.files;p.length||(M({type:"closeDialog"}),$())}},300)};m.useEffect(function(){return window.addEventListener("focus",wt,!1),function(){window.removeEventListener("focus",wt,!1)}},[k,bt,$,Se]);var ee=m.useRef([]),xt=function(p){E.current&&E.current.contains(p.target)||(p.preventDefault(),ee.current=[])};m.useEffect(function(){return le&&(document.addEventListener("dragover",Ut,!1),document.addEventListener("drop",xt,!1)),function(){le&&(document.removeEventListener("dragover",Ut),document.removeEventListener("drop",xt))}},[E,le]),m.useEffect(function(){return!n&&be&&E.current&&E.current.focus(),function(){}},[E,be,n]);var G=m.useCallback(function(u){d?d(u):console.error(u)},[d]),vt=m.useCallback(function(u){u.preventDefault(),u.persist(),ke(u),ee.current=[].concat(Ln(ee.current),[u.target]),je(u)&&Promise.resolve(s(u)).then(function(p){if(!(Ne(u)&&!N)){var F=p.length,A=F>0&&_n({files:p,accept:x,minSize:o,maxSize:i,multiple:a,maxFiles:f,validator:g}),O=F>0&&!A;M({isDragAccept:A,isDragReject:O,isDragActive:!0,type:"setDraggedFiles"}),l&&l(u)}}).catch(function(p){return G(p)})},[s,l,G,N,x,o,i,a,f,g]),Et=m.useCallback(function(u){u.preventDefault(),u.persist(),ke(u);var p=je(u);if(p&&u.dataTransfer)try{u.dataTransfer.dropEffect="copy"}catch{}return p&&b&&b(u),!1},[b,N]),St=m.useCallback(function(u){u.preventDefault(),u.persist(),ke(u);var p=ee.current.filter(function(A){return E.current&&E.current.contains(A)}),F=p.indexOf(u.target);F!==-1&&p.splice(F,1),ee.current=p,!(p.length>0)&&(M({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),je(u)&&h&&h(u))},[E,h,N]),Fe=m.useCallback(function(u,p){var F=[],A=[];u.forEach(function(O){var ue=ar(O,x),ne=et(ue,2),Ke=ne[0],Xe=ne[1],Ge=cr(O,o,i),Re=et(Ge,2),Ve=Re[0],Ye=Re[1],Je=g?g(O):null;if(Ke&&Ve&&!Je)F.push(O);else{var Qe=[Xe,Ye];Je&&(Qe=Qe.concat(Je)),A.push({file:O,errors:Qe.filter(function(Nr){return Nr})})}}),(!a&&F.length>1||a&&f>=1&&F.length>f)&&(F.forEach(function(O){A.push({file:O,errors:[Fn]})}),F.splice(0)),M({acceptedFiles:F,fileRejections:A,type:"setFiles"}),T&&T(F,A,p),A.length>0&&j&&j(A,p),F.length>0&&P&&P(F,p)},[M,a,x,o,i,f,T,P,j,g]),_e=m.useCallback(function(u){u.preventDefault(),u.persist(),ke(u),ee.current=[],je(u)&&Promise.resolve(s(u)).then(function(p){Ne(u)&&!N||Fe(p,u)}).catch(function(p){return G(p)}),M({type:"reset"})},[s,Fe,G,N]),te=m.useCallback(function(){if(Se.current){M({type:"openDialog"}),H();var u={multiple:a,types:L};window.showOpenFilePicker(u).then(function(p){return s(p)}).then(function(p){Fe(p,null),M({type:"closeDialog"})}).catch(function(p){Tn(p)?($(p),M({type:"closeDialog"})):Mn(p)?(Se.current=!1,k.current?(k.current.value=null,k.current.click()):G(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):G(p)});return}k.current&&(M({type:"openDialog"}),H(),k.current.value=null,k.current.click())},[M,H,$,W,Fe,G,L,a]),Ft=m.useCallback(function(u){!E.current||!E.current.isEqualNode(u.target)||(u.key===" "||u.key==="Enter"||u.keyCode===32||u.keyCode===13)&&(u.preventDefault(),te())},[E,te]),_t=m.useCallback(function(){M({type:"focus"})},[]),At=m.useCallback(function(){M({type:"blur"})},[]),kt=m.useCallback(function(){we||(Rn()?setTimeout(te,0):te())},[we,te]),re=function(p){return n?null:p},Be=function(p){return Z?null:re(p)},Ae=function(p){return xe?null:re(p)},ke=function(p){N&&p.stopPropagation()},Or=m.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=u.refKey,F=p===void 0?"ref":p,A=u.role,O=u.onKeyDown,ue=u.onFocus,ne=u.onBlur,Ke=u.onClick,Xe=u.onDragEnter,Ge=u.onDragOver,Re=u.onDragLeave,Ve=u.onDrop,Ye=Le(u,Cn);return v(v(dt({onKeyDown:Be(U(O,Ft)),onFocus:Be(U(ue,_t)),onBlur:Be(U(ne,At)),onClick:re(U(Ke,kt)),onDragEnter:Ae(U(Xe,vt)),onDragOver:Ae(U(Ge,Et)),onDragLeave:Ae(U(Re,St)),onDrop:Ae(U(Ve,_e)),role:typeof A=="string"&&A!==""?A:"presentation"},F,E),!n&&!Z?{tabIndex:0}:{}),Ye)}},[E,Ft,_t,At,kt,vt,Et,St,_e,Z,xe,n]),Ir=m.useCallback(function(u){u.stopPropagation()},[]),Cr=m.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=u.refKey,F=p===void 0?"ref":p,A=u.onChange,O=u.onClick,ue=Le(u,Nn),ne=dt({accept:x,multiple:a,type:"file",style:{display:"none"},onChange:re(U(A,_e)),onClick:re(U(O,Ir)),tabIndex:-1},F,k);return v(v({},ne),ue)}},[k,r,a,_e,n]);return v(v({},We),{},{isFocused:Mr&&!n,getRootProps:Or,getInputProps:Cr,rootRef:E,inputRef:k,open:re(te)})}function Kn(t,e){switch(e.type){case"focus":return v(v({},t),{},{isFocused:!0});case"blur":return v(v({},t),{},{isFocused:!1});case"openDialog":return v(v({},pt),{},{isFileDialogActive:!0});case"closeDialog":return v(v({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return v(v({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return v(v({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return v({},pt);default:return t}}function Ht(){}const ie="0.18.0";let zt=!1,me,hr,ht,mr,gr,yr;function Xn(t,e={auto:!1}){if(zt)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${t.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(me)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${t.kind}'\` after \`import '@anthropic-ai/sdk/shims/${me}'\``);zt=e.auto,me=t.kind,hr=t.fetch,ht=t.File,mr=t.ReadableStream,gr=t.getDefaultAgent,yr=t.fileFromPath}class Gn{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Vn({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n";let r,n,s,i;try{r=fetch,n=Request,s=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:s,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new Gn(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:o=>!1}}me||Xn(Vn(),{auto:!0});class _ extends Error{}class R extends _{constructor(e,r,n,s){super(`${R.makeMessage(e,r,n)}`),this.status=e,this.headers=s,this.error=r}static makeMessage(e,r,n){const s=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,r,n,s){if(!e)return new He({cause:mt(r)});const i=r;return e===400?new wr(e,i,n,s):e===401?new xr(e,i,n,s):e===403?new vr(e,i,n,s):e===404?new Er(e,i,n,s):e===409?new Sr(e,i,n,s):e===422?new Fr(e,i,n,s):e===429?new _r(e,i,n,s):e>=500?new Ar(e,i,n,s):new R(e,i,n,s)}}class Y extends R{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class He extends R{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class br extends He{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wr extends R{constructor(){super(...arguments),this.status=400}}class xr extends R{constructor(){super(...arguments),this.status=401}}class vr extends R{constructor(){super(...arguments),this.status=403}}class Er extends R{constructor(){super(...arguments),this.status=404}}class Sr extends R{constructor(){super(...arguments),this.status=409}}class Fr extends R{constructor(){super(...arguments),this.status=422}}class _r extends R{constructor(){super(...arguments),this.status=429}}class Ar extends R{}class K{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;const s=new Yn;async function*i(){if(!e.body)throw r.abort(),new _("Attempted to iterate over a response with no body");const a=new J,f=Wt(e.body);for await(const l of f)for(const h of a.decode(l)){const b=s.decode(h);b&&(yield b)}for(const l of a.flush()){const h=s.decode(l);h&&(yield h)}}async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const f of i()){if(f.event==="completion")try{yield JSON.parse(f.data)}catch(l){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),l}if(f.event==="message_start"||f.event==="message_delta"||f.event==="message_stop"||f.event==="content_block_start"||f.event==="content_block_delta"||f.event==="content_block_stop")try{yield JSON.parse(f.data)}catch(l){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),l}if(f.event!=="ping"&&f.event==="error"){const l=f.data,h=jr(l),b=h?void 0:l;throw R.generate(void 0,h,b,Rr(e.headers))}}a=!0}catch(f){if(f instanceof Error&&f.name==="AbortError")return;throw f}finally{a||r.abort()}}return new K(o,r)}static fromReadableStream(e,r){let n=!1;async function*s(){const o=new J,a=Wt(e);for await(const f of a)for(const l of o.decode(f))yield l;for(const f of o.flush())yield f}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const a of s())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||r.abort()}}return new K(i,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=n.next();e.push(o),r.push(o)}return i.shift()}});return[new K(()=>s(e),this.controller),new K(()=>s(r),this.controller)]}toReadableStream(){const e=this;let r;const n=new TextEncoder;return new mr({async start(){r=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:o}=await r.next();if(o)return s.close();const a=n.encode(JSON.stringify(i)+`
`);s.enqueue(a)}catch(i){s.error(i)}},async cancel(){var s;await((s=r.return)==null?void 0:s.call(r))}})}}class Yn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,s]=Jn(e,":");return s.startsWith(" ")&&(s=s.substring(1)),r==="event"?this.event=s:r==="data"&&this.data.push(s),null}}class J{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=J.NEWLINE_CHARS.has(r[r.length-1]||"");let s=r.split(J.NEWLINE_REGEXP);return n&&s.pop(),s.length===1&&!n?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),n||(this.buffer=[s.pop()||""]),s)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new _(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new _(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new _("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}J.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);J.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Jn(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function Wt(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Qn=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Zn=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function";async function es(t,e,r={}){var s;if(t=await t,Qn(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new ht([i],e,r)}const n=await ts(t);if(e||(e=ns(t)??"unknown_file"),!r.type){const i=(s=n[0])==null?void 0:s.type;typeof i=="string"&&(r={...r,type:i})}return new ht(n,e,r)}async function ts(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Zn(t))e.push(await t.arrayBuffer());else if(ss(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${rs(t)}`);return e}function rs(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function ns(t){var e;return tt(t.name)||tt(t.filename)||((e=tt(t.path))==null?void 0:e.split(/[\\/]/).pop())}const tt=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},ss=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Bt=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody";var Ie={};async function kr(t){const{response:e}=t;if(t.options.stream)return oe("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):K.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const i=await e.json();return oe("response",e.status,e.url,e.headers,i),i}const s=await e.text();return oe("response",e.status,e.url,e.headers,s),s}class ze extends Promise{constructor(e,r=kr){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new ze(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class is{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:s,fetch:i}){this.baseURL=e,this.maxRetries=rt("maxRetries",r),this.timeout=rt("timeout",n),this.httpAgent=s,this.fetch=i??hr}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ls(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${hs()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(s=>({method:e,path:r,...s})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var j;const{method:r,path:n,query:s,headers:i={}}=e,o=Bt(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(o),f=this.buildURL(n,s);"timeout"in e&&rt("timeout",e.timeout);const l=e.timeout??this.timeout,h=e.httpAgent??this.httpAgent??gr(f),b=l+1e3;typeof((j=h==null?void 0:h.options)==null?void 0:j.timeout)=="number"&&b>(h.options.timeout??0)&&(h.options.timeout=b),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const T=this.buildHeaders({options:e,headers:i,contentLength:a});return{req:{method:r,...o&&{body:o},headers:T,...h&&{agent:h},signal:e.signal??null},url:f,timeout:l}}buildHeaders({options:e,headers:r,contentLength:n}){const s={};n&&(s["content-length"]=n);const i=this.defaultHeaders(e);return Vt(s,i),Vt(s,r),Bt(e.body)&&me!=="node"&&delete s["content-type"],this.validateHeaders(s,r),s}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,s){return R.generate(e,r,n,s)}request(e,r=null){return new ze(this.makeRequest(e,r))}async makeRequest(e,r){var h,b;const n=await e;r==null&&(r=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:s,url:i,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(s,{url:i,options:n}),oe("request",i,n,s.headers),(h=n.signal)!=null&&h.aborted)throw new Y;const a=new AbortController,f=await this.fetchWithTimeout(i,s,o,a).catch(mt);if(f instanceof Error){if((b=n.signal)!=null&&b.aborted)throw new Y;if(r)return this.retryRequest(n,r);throw f.name==="AbortError"?new br:new He({cause:f})}const l=Rr(f.headers);if(!f.ok){if(r&&this.shouldRetry(f)){const W=`retrying, ${r} attempts remaining`;return oe(`response (error; ${W})`,f.status,i,l),this.retryRequest(n,r,l)}const T=await f.text().catch(W=>mt(W).message),P=jr(T),j=P?void 0:T;throw oe(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,f.status,i,l,j),this.makeStatusError(f.status,P,j,l)}return{response:f,options:n,controller:a}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new os(this,n,e)}buildURL(e,r){const n=fs(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return gt(s)||(r={...s,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new _(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,s){const{signal:i,...o}=r||{};i&&i.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:s.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let s;const i=n==null?void 0:n["retry-after-ms"];if(i){const a=parseFloat(i);Number.isNaN(a)||(s=a)}const o=n==null?void 0:n["retry-after"];if(o&&!s){const a=parseFloat(o);Number.isNaN(a)?s=Date.parse(o)-Date.now():s=a*1e3}if(!(s&&0<=s&&s<60*1e3)){const a=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,a)}return await ds(s),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){const i=r-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ie}`}}class os extends ze{constructor(e,r,n){super(r,async s=>new n(e,s.response,await kr(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const Rr=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),as=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":Xt(Deno.build.os),"X-Stainless-Arch":Kt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":Xt(process.platform),"X-Stainless-Arch":Kt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=cs();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cs(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const s=n[1]||0,i=n[2]||0,o=n[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const Kt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Xt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Gt;const ls=()=>Gt??(Gt=as()),jr=t=>{try{return JSON.parse(t)}catch{return}},us=new RegExp("^(?:[a-z]+:)?//","i"),fs=t=>us.test(t),ds=t=>new Promise(e=>setTimeout(e,t)),rt=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _(`${t} must be an integer`);if(e<0)throw new _(`${t} must be a positive integer`);return e},mt=t=>t instanceof Error?t:new Error(t),nt=t=>{var e,r,n,s;if(typeof process<"u")return((e=Ie==null?void 0:Ie[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:s.trim()};function gt(t){if(!t)return!0;for(const e in t)return!1;return!0}function ps(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vt(t,e){for(const r in e){if(!ps(e,r))continue;const n=r.toLowerCase();if(!n)continue;const s=e[r];s===null?delete t[n]:s!==void 0&&(t[n]=s)}}function oe(t,...e){typeof process<"u"&&Ie.DEBUG==="true"&&console.log(`Anthropic:DEBUG:${t}`,...e)}const hs=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)});class Pr{constructor(e){this._client=e}}class $e extends Pr{create(e,r){return this._client.post("/v1/complete",{body:e,timeout:6e5,...r,stream:e.stream??!1})}}$e||($e={});var D=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},y=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},I,B,Pe,De,fe,de,Te,pe,z,he,Me,Oe,se,st,Yt,it,ot,at,ct,Jt;class Ue{constructor(){I.add(this),this.messages=[],this.receivedMessages=[],B.set(this,void 0),this.controller=new AbortController,Pe.set(this,void 0),De.set(this,()=>{}),fe.set(this,()=>{}),de.set(this,void 0),Te.set(this,()=>{}),pe.set(this,()=>{}),z.set(this,{}),he.set(this,!1),Me.set(this,!1),Oe.set(this,!1),se.set(this,!1),it.set(this,e=>{if(D(this,Me,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Y),e instanceof Y)return D(this,Oe,!0,"f"),this._emit("abort",e);if(e instanceof _)return this._emit("error",e);if(e instanceof Error){const r=new _(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new _(String(e)))}),D(this,Pe,new Promise((e,r)=>{D(this,De,e,"f"),D(this,fe,r,"f")}),"f"),D(this,de,new Promise((e,r)=>{D(this,Te,e,"f"),D(this,pe,r,"f")}),"f"),y(this,Pe,"f").catch(()=>{}),y(this,de,"f").catch(()=>{})}static fromReadableStream(e){const r=new Ue;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){const s=new Ue;for(const i of r.messages)s._addMessageParam(i);return s._run(()=>s._createMessage(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},y(this,it,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){var o;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,I,"m",ot).call(this);const i=await e.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const a of i)y(this,I,"m",at).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new Y;y(this,I,"m",ct).call(this)}_connected(){this.ended||(y(this,De,"f").call(this),this._emit("connect"))}get ended(){return y(this,he,"f")}get errored(){return y(this,Me,"f")}get aborted(){return y(this,Oe,"f")}abort(){this.controller.abort()}on(e,r){return(y(this,z,"f")[e]||(y(this,z,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=y(this,z,"f")[e];if(!n)return this;const s=n.findIndex(i=>i.listener===r);return s>=0&&n.splice(s,1),this}once(e,r){return(y(this,z,"f")[e]||(y(this,z,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{D(this,se,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){D(this,se,!0,"f"),await y(this,de,"f")}get currentMessage(){return y(this,B,"f")}async finalMessage(){return await this.done(),y(this,I,"m",st).call(this)}async finalText(){return await this.done(),y(this,I,"m",Yt).call(this)}_emit(e,...r){if(y(this,he,"f"))return;e==="end"&&(D(this,he,!0,"f"),y(this,Te,"f").call(this));const n=y(this,z,"f")[e];if(n&&(y(this,z,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...r))),e==="abort"){const s=r[0];!y(this,se,"f")&&!(n!=null&&n.length)&&Promise.reject(s),y(this,fe,"f").call(this,s),y(this,pe,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=r[0];!y(this,se,"f")&&!(n!=null&&n.length)&&Promise.reject(s),y(this,fe,"f").call(this,s),y(this,pe,"f").call(this,s),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",y(this,I,"m",st).call(this))}async _fromReadableStream(e,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),y(this,I,"m",ot).call(this),this._connected();const s=K.fromReadableStream(e,this.controller);for await(const o of s)y(this,I,"m",at).call(this,o);if((i=s.controller.signal)!=null&&i.aborted)throw new Y;y(this,I,"m",ct).call(this)}[(B=new WeakMap,Pe=new WeakMap,De=new WeakMap,fe=new WeakMap,de=new WeakMap,Te=new WeakMap,pe=new WeakMap,z=new WeakMap,he=new WeakMap,Me=new WeakMap,Oe=new WeakMap,se=new WeakMap,it=new WeakMap,I=new WeakSet,st=function(){if(this.receivedMessages.length===0)throw new _("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Yt=function(){if(this.receivedMessages.length===0)throw new _("stream ended without producing a Message with role=assistant");const r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new _("stream ended without producing a content block with type=text");return r.join(" ")},ot=function(){this.ended||D(this,B,void 0,"f")},at=function(r){if(this.ended)return;const n=y(this,I,"m",Jt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{r.delta.type==="text_delta"&&this._emit("text",r.delta.text,n.content.at(-1).text||"");break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{D(this,B,n,"f");break}}},ct=function(){if(this.ended)throw new _("stream has ended, this shouldn't happen");const r=y(this,B,"f");if(!r)throw new _("request ended without sending any chunks");return D(this,B,void 0,"f"),r},Jt=function(r){let n=y(this,B,"f");if(r.type==="message_start"){if(n)throw new _(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new _(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{const s=n.content.at(r.index);return(s==null?void 0:s.type)==="text"&&r.delta.type==="text_delta"&&(s.text+=r.delta.text),n}case"content_block_stop":return n}},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("streamEvent",s=>{const i=r.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of r)s.resolve(void 0);r.length=0}),this.on("abort",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),this.on("error",s=>{n=!0;for(const i of r)i.reject(s);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,o)=>r.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new K(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class qe extends Pr{create(e,r){return this._client.post("/v1/messages",{body:e,timeout:6e5,...r,stream:e.stream??!1})}stream(e,r){return Ue.createMessage(this,e,r)}}qe||(qe={});var Dr;class S extends is{constructor({baseURL:e=nt("ANTHROPIC_BASE_URL"),apiKey:r=nt("ANTHROPIC_API_KEY")??null,authToken:n=nt("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){const i={apiKey:r,authToken:n,...s,baseURL:e||"https://api.anthropic.com"};super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new $e(this),this.messages=new qe(this),this._options=i,this.apiKey=r,this.authToken=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(e,r){if(!(this.apiKey&&e["x-api-key"])&&r["x-api-key"]!==null&&!(this.authToken&&e.authorization)&&r.authorization!==null)throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){const r=this.apiKeyAuth(e),n=this.bearerAuth(e);return r!=null&&!gt(r)?r:n!=null&&!gt(n)?n:{}}apiKeyAuth(e){return this.apiKey==null?{}:{"X-Api-Key":this.apiKey}}bearerAuth(e){return this.authToken==null?{}:{Authorization:`Bearer ${this.authToken}`}}}Dr=S;S.Anthropic=Dr;S.HUMAN_PROMPT=`

Human:`;S.AI_PROMPT=`

Assistant:`;S.AnthropicError=_;S.APIError=R;S.APIConnectionError=He;S.APIConnectionTimeoutError=br;S.APIUserAbortError=Y;S.NotFoundError=Er;S.ConflictError=Sr;S.RateLimitError=_r;S.BadRequestError=wr;S.AuthenticationError=xr;S.InternalServerError=Ar;S.PermissionDeniedError=vr;S.UnprocessableEntityError=Fr;const{HUMAN_PROMPT:As,AI_PROMPT:ks}=S;(function(t){t.toFile=es,t.fileFromPath=yr,t.Completions=$e,t.Messages=qe})(S||(S={}));var ms={};const gs=new S({apiKey:ms.VITE_ANTHROPIC_API_KEY,dangerouslyAllowBrowser:!0}),Qt=3,ys=1e3;async function bs(t){return new Promise(e=>setTimeout(e,t))}async function Tr(t,e,r,n,s,i=0){try{console.log("Making request to Netlify function...");const o=`Step 1:Create an email template that follows essential UX design principles to reduce cognitive load and improve readability:
STRUCTURE:
Group related information with adequate white space
Establish a clear visual hierarchy with primary, secondary, and tertiary elements
Left-align text for natural reading flow
TYPOGRAPHY:
Use a single sans-serif font with good x-height (taller lowercase letters)
Implement a 1.5+ line height for body text
Limit uppercase text to short headings only
Stick to regular and bold weights only
Use dark gray (#333333) instead of pure black for text
VISUAL ELEMENTS:
Apply a consistent design pattern throughout
Ensure all interface elements meet 3:1 contrast ratio
Ensure all text meets 4.5:1 contrast ratio
Include non-color indicators alongside any color-based information
Use color strategically and sparingly to guide attention
CONTENT APPROACH:
Focus on a single primary message/action
Minimize unnecessary information
Present information in digestible chunks
Make the primary call-to-action clearly distinguishable
Please create a clean, accessible email template that applies these principles while keeping cognitive load to a minimum.

Step 2: Create an HTML email template based on the UX design principles I shared previously. The template should:
STRUCTURE & LAYOUT:
Follow a layout similar to the image I've uploaded
Include clear sections for header, main content, and footer
Use responsive design principles that work across devices
CODE REQUIREMENTS:
Provide complete, production-ready HTML code
Include inline CSS (for email compatibility)
Ensure the template works in major email clients
Add helpful comments explaining key sections
DESIGN ELEMENTS:
Incorporate a clean, minimalist aesthetic
Use limited color palette (2-3 colors maximum)
Include placeholders for logo, images, and content
Make sure all text and UI elements meet accessibility contrast requirements
Please create the complete HTML email template code and show a visual representation of how the final design will look. Include explanations for any design decisions you made based on the UX principles.
Step 3: Optimize the student engagement email template for Tripalink to better activate and re-engage student leads. Please:
MAINTAIN STRUCTURE:
Keep the current email layout exactly as shown
Preserve all existing sections and their arrangement
COLOR OPTIMIZATION:
Revise the color scheme following the design principles I shared earlier
Ensure 4.5:1 contrast ratio for all text elements
Use color strategically to highlight key actions and information
Implement a cohesive palette that appeals to student audiences
COPY IMPROVEMENTS:
Rewrite headlines and body text to be more compelling for students
Focus on clear benefits and specific value propositions
Use concise, action-oriented language
Include effective calls-to-action that motivate response
Maintain a conversational, student-friendly tone
DESIGN RULE APPLICATION:
Apply all previously mentioned design rules (spacing, typography, hierarchy, etc.)
Ensure the design reduces cognitive load
Make sure all similar elements function consistently
Use sans-serif fonts with appropriate line height
Please provide both the optimized design elements and explain the specific improvements made to colors and copy that will help Tripalink better engage student leads.
Step 4: Compare the original and revised email templates for Tripalink's student engagement campaign, then create an even more optimized version.
COMPARATIVE ANALYSIS:
Analyze specific improvements in the revised template compared to the original
Identify how the changes address the design principles I mentioned earlier
Evaluate the effectiveness for student engagement based on:
Visual hierarchy and information flow
Color psychology and emotional impact
Copywriting clarity and persuasiveness
Call-to-action effectiveness
FURTHER OPTIMIZATIONS:
Propose additional improvements beyond the current revision
Address any remaining issues or missed opportunities
Consider student-specific behavioral psychology principles
Suggest A/B testing options if applicable
FINAL TEMPLATE:
Create an enhanced version incorporating all insights
Explain the rationale behind each new improvement
Highlight how these changes will better activate student leads for Tripalink
Please provide both the analysis and the improved template design with specific explanations of why this version will be more effective at re-engaging student leads.
Note: Only HTML needs to be returned, no explanation is required`,a=`You are an expert email marketing copywriter and HTML developer. Your task is to create compelling, conversion-focused email templates that follow modern email design best practices.

Guidelines:
- Use responsive HTML email design
- Follow accessibility best practices
- Keep the design clean and focused
- Include clear calls-to-action
- Optimize for mobile devices
- Use web-safe fonts
audience:${t}
scenario:${e}
type:${r}
goal:${n}
- Keep the width under 600px Note: Only HTML needs to be returned, no explanation is required`,h=(await gs.messages.create({model:"claude-3-7-sonnet-20250219",max_tokens:4e3,messages:[{role:"user",content:o},{role:"user",content:a}]})).content[0],{text:b}=h||{};return{subject:"",html:b}}catch(o){if(console.error("Error generating email template:",o),i<Qt){const f=ys*Math.pow(2,i);return console.log(`Retrying template generation (${i+1}/${Qt})...`),await bs(f),Tr(t,e,r,n,s,i+1)}const a=o instanceof Error?o.message:"Failed to generate template";throw q.error(a),new Error(a)}}async function ws(){try{const t=await fetch("/api/anthropic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audience:"test",scenario:"test",type:"test",goal:"test"})});if(!t.ok){const e=await t.json().catch(()=>({}));return q.error(`API Error: ${e.error||t.statusText}`),!1}try{const e=await t.json();return!e||!e.subject||!e.html?(q.error("Invalid API response format"),!1):!0}catch(e){return console.error("Error parsing API response:",e),q.error("Invalid response format from API"),!1}}catch(t){return console.error("Error validating API key:",t),q.error("Failed to validate API key. Please try again."),!1}}function Rs(){const{user:t}=$r();Ur();const[e,r]=m.useState(1),[n,s]=m.useState(""),[i,o]=m.useState([]),[a,f]=m.useState(null),[l,h]=m.useState(!1),[b,T]=m.useState(null),[P,j]=m.useState({testDuration:7,audienceSize:1e3,startDate:new Date().toISOString().split("T")[0]});m.useRef(null);const C=m.useRef(null),{getRootProps:Q,getInputProps:W}=pr({accept:{"text/html":[".html"]},maxFiles:1,onDrop:async d=>{const g=d[0],x=new FileReader;x.onload=()=>{f(x.result)},x.readAsText(g)}}),be=d=>{try{console.log("Parsing requirement:",d);const g=d.split(",").map(k=>k.trim());if(console.log("Split parts:",g),g.length<4)throw new Error("Please provide all required information: audience, scenario, type, and goal");const[x,L,H,$]=g;if(!x||!L||!H||!$)throw new Error("All fields (audience, scenario, type, goal) must be non-empty");const E={audience:x.replace(/^["']|["']$/g,""),scenario:L.replace(/^["']|["']$/g,""),type:H.replace(/^["']|["']$/g,""),goal:$.replace(/^["']|["']$/g,"")};return console.log("Parsed requirement:",E),E}catch(g){throw console.error("Error parsing requirement:",g),new Error("Invalid input format. Please use: audience, scenario, type, goal")}},le=async()=>{try{if(console.log("Starting template generation..."),!await ws()){console.log("API key validation failed");return}h(!0);const g=q.loading("Generating email templates..."),{audience:x,scenario:L,type:H,goal:$}=be(n);console.log("Generating templates with parameters:",{audience:x,scenario:L,type:H,goal:$});const E=[Tr(x,L,H,$,a||void 0)];console.log("Generated templates:",E);const k=E.map((ve,Ee)=>({id:`template-${Ee+1}`,html:ve.html,subject:ve.subject,thumbnail:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="#f0f0f0"/></svg>')}`,selected:!1}));o(k),q.success("Templates generated successfully!",{id:g}),r(2)}catch(d){console.error("Error in generateTemplates:",d),q.error(d instanceof Error?d.message:"Failed to generate templates")}finally{h(!1)}},we=d=>{o(g=>g.map(x=>({...x,selected:x.id===d?!x.selected:x.selected})))},Z=d=>{if(T(d),C.current){const g=C.current.contentDocument;g&&(g.open(),g.write(d),g.close())}},xe=async()=>{try{const d=i.filter(L=>L.selected);if(d.length!==2)throw new Error("Please select exactly 2 templates for A/B testing");const{data:{user:g}}=await Rt.auth.getUser();if(!g)throw new Error("User not authenticated");const{error:x}=await Rt.from("experiments").insert({user_id:g.id,templates:d,setup:P,status:"pending",created_at:new Date});if(x)throw x;q.success("Experiment created successfully!"),r(3)}catch(d){console.error("Error saving experiment:",d),q.error("Failed to save experiment. Please try again.")}},N=[{number:1,title:"Requirement",icon:Wr},{number:2,title:"Generation",icon:Pt},{number:3,title:"Experiment",icon:Kr}];return c.jsx("div",{className:"min-h-screen pt-24 pb-16",children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Hey"," ",c.jsx("span",{className:"bg-gradient-to-r from-[#00F0FF] to-[#A742FF] bg-clip-text text-transparent",children:(t==null?void 0:t.displayName)||"there"}),", let's create your email campaign"]}),c.jsx("p",{className:"text-gray-400",children:"Describe your requirements and let AI do the magic"})]}),c.jsx("div",{className:"flex justify-center mb-12",children:c.jsx("div",{className:"flex items-center space-x-4",children:N.map((d,g)=>c.jsxs(Zt.Fragment,{children:[c.jsxs("div",{className:`flex items-center ${e>=d.number?"text-[#00F0FF]":"text-gray-400"}`,children:[c.jsx("div",{className:`
                    w-10 h-10 rounded-full flex items-center justify-center
                    ${e>=d.number?"bg-[#00F0FF]/20":"bg-gray-800"}
                  `,children:c.jsx(d.icon,{className:"w-5 h-5"})}),c.jsx("span",{className:"ml-2",children:d.title})]}),g<N.length-1&&c.jsx(zr,{className:"w-5 h-5 text-gray-400"})]},d.number))})}),e===1&&c.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto",children:c.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-[#00F0FF]/20",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Describe Your Campaign"}),c.jsxs("div",{className:"mb-4 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg flex items-start gap-3",children:[c.jsx(Hr,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-blue-400",children:["Format your input exactly as: ",c.jsx("span",{className:"font-mono",children:"audience, scenario, type, goal"})]}),c.jsx("p",{className:"text-xs text-blue-300 mt-1",children:'Example: "New customers, abandoned shopping cart, reminder email, complete purchase"'})]})]}),c.jsx("textarea",{value:n,onChange:d=>s(d.target.value),className:"w-full h-40 bg-white/5 border border-[#00F0FF]/20 rounded-lg p-4 text-white placeholder-gray-400 focus:outline-none focus:border-[#00F0FF]",placeholder:"Format: audience, scenario, type, goal"}),c.jsx("div",{className:"mt-6",children:c.jsxs("div",{...Q(),className:"border-2 border-dashed border-[#00F0FF]/20 rounded-lg p-6 text-center cursor-pointer hover:border-[#00F0FF]/40 transition-colors",children:[c.jsx("input",{...W()}),c.jsx(Xr,{className:"w-8 h-8 text-[#00F0FF] mx-auto mb-2"}),c.jsx("p",{className:"text-gray-400",children:"Optional: Upload a reference HTML email template"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Drag & drop or click to select"})]})}),a&&c.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"font-medium",children:"Reference Template"}),c.jsxs("button",{onClick:()=>Z(a),className:"flex items-center gap-2 text-[#00F0FF] hover:underline",children:[c.jsx(jt,{className:"w-4 h-4"}),"Preview"]})]}),c.jsx("div",{className:"max-h-40 overflow-auto",children:c.jsx("pre",{className:"text-sm text-gray-400",children:a})})]}),c.jsx("button",{onClick:le,disabled:!n||l,className:`
                  mt-6 w-full py-4 rounded-lg font-semibold flex items-center justify-center gap-2
                  ${!n||l?"bg-gray-700 cursor-not-allowed":"bg-gradient-to-r from-[#00F0FF] to-[#A742FF] hover:opacity-90"}
                `,children:l?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Pt,{className:"w-5 h-5"}),"Generate Templates"]})})]})}),e===2&&c.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:c.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-[#00F0FF]/20",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Generated Templates"}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((d,g)=>c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`
                        rounded-lg overflow-hidden border-2 cursor-pointer
                        ${d.selected?"border-[#00F0FF]":"border-transparent"}
                      `,onClick:()=>we(d.id),children:c.jsxs("div",{className:"p-4 bg-white/5",children:[c.jsxs("h3",{className:"font-medium mb-2",children:["Template ",g+1]}),c.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Subject: ",d.subject]}),c.jsxs("div",{className:"relative h-40 overflow-hidden",children:[c.jsx("button",{onClick:x=>{x.stopPropagation(),Z(d.html)},className:"absolute top-2 right-2 p-2 bg-[#00F0FF]/20 rounded-full hover:bg-[#00F0FF]/30 transition-colors",children:c.jsx(jt,{className:"w-4 h-4"})}),c.jsx("iframe",{srcDoc:d.html,className:"w-full h-full border-0",title:`Template ${g+1}`})]})]})}),c.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-gray-400",children:["Template ",g+1]}),d.selected&&c.jsx(qr,{className:"w-5 h-5 text-[#00F0FF]"})]})]},d.id))}),b&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-[#0D0D1F] rounded-lg w-full max-w-4xl h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#00F0FF]/20",children:[c.jsx("h3",{className:"font-semibold",children:"Template Preview"}),c.jsx("button",{onClick:()=>T(null),className:"text-gray-400 hover:text-white",children:"✕"})]}),c.jsx("div",{className:"flex-1 overflow-auto p-4",children:c.jsx("iframe",{ref:C,className:"w-full h-full bg-white rounded",title:"Email Preview"})})]})}),c.jsxs("div",{className:"mt-8 flex justify-between",children:[c.jsx("button",{onClick:()=>r(1),className:"px-6 py-3 rounded-lg border border-[#00F0FF]/20 hover:bg-[#00F0FF]/10 transition-colors",children:"Back"}),c.jsx("button",{onClick:()=>r(3),disabled:i.filter(d=>d.selected).length!==2,className:`
                    px-6 py-3 rounded-lg font-semibold
                    ${i.filter(d=>d.selected).length===2?"bg-gradient-to-r from-[#00F0FF] to-[#A742FF] hover:opacity-90":"bg-gray-700 cursor-not-allowed"}
                  `,children:"Set Up Experiment"})]})]})}),e===3&&c.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto",children:c.jsxs("div",{className:"bg-white/5 rounded-lg p-6 border border-[#00F0FF]/20",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Experiment Setup"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Test Duration (days)"}),c.jsx("input",{type:"number",min:"1",max:"30",value:P.testDuration,onChange:d=>j(g=>({...g,testDuration:parseInt(d.target.value)})),className:"w-full bg-white/5 border border-[#00F0FF]/20 rounded-lg p-3 text-white focus:outline-none focus:border-[#00F0FF]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Audience Size"}),c.jsx("input",{type:"number",min:"100",step:"100",value:P.audienceSize,onChange:d=>j(g=>({...g,audienceSize:parseInt(d.target.value)})),className:"w-full bg-white/5 border border-[#00F0FF]/20 rounded-lg p-3 text-white focus:outline-none focus:border-[#00F0FF]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),c.jsx("input",{type:"date",value:P.startDate,onChange:d=>j(g=>({...g,startDate:d.target.value})),className:"w-full bg-white/5 border border-[#00F0FF]/20 rounded-lg p-3 text-white focus:outline-none focus:border-[#00F0FF]"})]})]}),c.jsxs("div",{className:"mt-8 flex justify-between",children:[c.jsx("button",{onClick:()=>r(2),className:"px-6 py-3 rounded-lg border border-[#00F0FF]/20 hover:bg-[#00F0FF]/10 transition-colors",children:"Back"}),c.jsx("button",{onClick:xe,className:"px-6 py-3 rounded-lg font-semibold bg-gradient-to-r from-[#00F0FF] to-[#A742FF] hover:opacity-90",children:"Start Experiment"})]})]})})]})})}export{Rs as EmailCampaign};
